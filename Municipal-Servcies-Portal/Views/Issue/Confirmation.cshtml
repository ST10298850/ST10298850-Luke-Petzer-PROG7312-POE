@model Municipal_Servcies_Portal.Models.Issue
@{
    // Set the page title for the confirmation page
    ViewData["Title"] = "Confirmation Page";
}
<link href="https://fonts.googleapis.com/css?family=Poppins:400,500,600,700&display=swap" rel="stylesheet">
<main class="confirmation-container">
    <!-- Confirmation card with success message and summary -->
    <section class="confirmation-card">
        <div class="confirmation-header">
            <!-- Success icon -->
            <div class="confirmation-success-icon">
                <img src="~/images/icons/ic_sucess_tick.svg" alt="Success Tick Icon" width="32" height="32" />
            </div>
            <div class="confirmation-success-title">Success!</div>
            <div class="confirmation-success-desc">Your issue has been successfully reported!</div>
        </div>
        <div class="confirmation-summary">
            <div class="summary-title">Report Summary</div>
            <!-- Reference number (randomized for display) -->
            <div class="summary-section summary-ref bg-blue-100">
                <div class="summary-label">Reference Number</div>
                <div class="summary-value">#MSP-@DateTime.Now.ToString("yyyy")-@(new Random().Next(100000, 999999))</div>
            </div>
            <!-- Location -->
            <div class="summary-section">
                <div class="summary-label">Location</div>
                <div class="summary-value">@Model.Location</div>
            </div>
            <!-- Category -->
            <div class="summary-section">
                <div class="summary-label">Category</div>
                <div class="summary-value flex align-center gap-8">
                    <span>@Model.Category</span>
                </div>
            </div>
            <!-- Description -->
            <div class="summary-section">
                <div class="summary-label">Description</div>
                <div class="summary-value">@Model.Description</div>
            </div>
            <!-- Attached files -->
            <div class="summary-section">
                <div class="summary-label">Attached File(s)</div>
                <div class="summary-value flex align-center gap-8">
                    @if (Model.AttachmentPaths != null && Model.AttachmentPaths.Count > 0)
                    {
                        foreach (var file in Model.AttachmentPaths)
                        {
                            <div class="attached-file flex align-center gap-4">
                                <img src="~/images/icons/ic_attatched_file.svg" alt="Attached File Icon" width="32" height="32" />
                                <span>@file</span>
                            </div>
                        }
                    }
                    else
                    {
                        <span>No file attached</span>
                    }
                </div>
            </div>
            <!-- Date reported -->
            <div class="summary-section">
                <div class="summary-label">Date Reported</div>
                <div class="summary-value">@Model.DateReported.ToString("g")</div>
            </div>
            <!-- Progress notifications (if provided) -->
            @if (!string.IsNullOrEmpty(Model.NotificationEmail) || !string.IsNullOrEmpty(Model.NotificationPhone))
            {
                <div class="summary-section">
                    <div class="summary-label">Progress Notifications</div>
                    <div class="summary-value">
                        @if (!string.IsNullOrEmpty(Model.NotificationEmail))
                        {
                            <div class="notification-item">
                                <span class="notification-type">ðŸ“§ Email:</span>
                                <span class="notification-contact">@Model.NotificationEmail</span>
                            </div>
                        }
                        @if (!string.IsNullOrEmpty(Model.NotificationPhone))
                        {
                            <div class="notification-item">
                                <span class="notification-type">ðŸ“± SMS:</span>
                                <span class="notification-contact">@Model.NotificationPhone</span>
                            </div>
                        }
                        @if (string.IsNullOrEmpty(Model.NotificationEmail) && string.IsNullOrEmpty(Model.NotificationPhone))
                        {
                            <span>No notifications requested</span>
                        }
                    </div>
                </div>
            }
        </div>
        <!-- Next steps for the user -->
        <div class="confirmation-next-steps">
            <div class="next-steps-title">What happens next?</div>
            <div class="next-steps-list">
                <div class="next-step flex align-center">
                    <div class="next-step-number">1</div>
                    <div class="next-step-desc">Your report will be reviewed within 24 hours</div>
                </div>
                <div class="next-step flex align-center">
                    <div class="next-step-number">2</div>
                    <div class="next-step-desc">We'll assign it to the appropriate department</div>
                </div>
                <div class="next-step flex align-center">
                    <div class="next-step-number">3</div>
                    <div class="next-step-desc">You'll receive updates via email at the address provided</div>
                </div>
            </div>
        </div>
        <!-- Action buttons for user navigation -->
        <div class="confirmation-actions flex gap-16">
            <a href="/Issue/Create" class="confirmation-btn primary flex align-center">
                <img src="~/images/icons/ic_plus.svg" alt="Plus Icon" width="32" height="32" />
                <span>Report Another Issue</span>
            </a>
            <a href="/" class="confirmation-btn secondary flex align-center">
                <img src="~/images/icons/ic_home.svg" alt="Home Icon" width="32" height="32" />                
                <span>Return to Main Menu</span>
            </a>
        </div>
    </section>
</main>
